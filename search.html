<html>

<head>

    <meta charset="utf-8">
    <title id="title"></title>
    <link rel="icon" type="image/icon" href="img/faviconPng.ico">
    <!-- Bootstrap -->
    <link href="bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/userStyle.css">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/dialogStyle.css" />
    <script src="bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <script src="http://bootstrap-ru.com/204/assets/js/bootstrap-tab.js"></script>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>

   
    <script src="http://bootstrap-ru.com/204/assets/js/bootstrap-dropdown.js"></script>

</head>


<style>
     * {
        outline: 0 !important;
        font-family: ubuntu;
    }


    body {
        font-size: 13px;
    }

    .navbar-default .navbar-nav>li>a {
        color: whitesmoke;
    }

    .navbar-default .navbar-nav>li>a:hover {
        color: #162449;
        background: whitesmoke;
    }

    .navbar-default .navbar-toggle:hover {
        background-color: transparent;
        color: whitesmoke;

    }

    .navbar-default .navbar-toggle {
        border: none;
    }

    button.navbar-toggle.collapsed.glyphicon.glyphicon-menu-hamburger {
        color: whitesmoke;
    }

    button.navbar-toggle.collapsed.glyphicon.glyphicon-menu-hamburger:focus {
        color: whitesmoke;
        background-color: transparent;
    }

    container {
        padding-left: 0px;
        padding-right: 0px;
        width: 100%;
    }

    /*    ///////////////////////////*/

    .nav-tabs {
        background-color: rgba(0, 0, 0, 0.1);
    }

    .btn-primary {
        background-color: rgba(0, 0, 0, 0.1);
        border: none;
        color: #337ab7;
    }

    .btn-primary:hover {
        background-color: rgba(0, 0, 0, 0.2);
        border: none;
        color: #337ab7;
    }

    .form-horizontal .control-label {
        font-weight: 100;
    }

    /*    ///////////////////Photo style///////////////////*/

    .image-preview-input {
        position: relative;
        overflow: hidden;
        margin: 0px;
        color: #333;
        background-color: #fff;
        border-color: #ccc;
    }

    .image-preview-input input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        padding: 0;
        font-size: 20px;
        cursor: pointer;
        opacity: 0;
        filter: alpha(opacity=0);
    }

    .image-preview-input-title {
        margin-left: 2px;
    }

    .profile-sidebar {

        padding: 20px;
        /*        margin-top: 20px;*/
    }

    @media (max-width: 395px) {


        .col-md-12 {
            padding-left: 0px;
            padding-right: 0px;
            width: 100%;
        }

        .profile-sidebar {
            padding: 0;
            /*
            margin-bottom: 20px;
            margin-top: 20px;
*/
        }
        .main-dialog {
            display: block;
            overflow-x: hidden;
            overflow-y: hidden;
            background-color: rgba(0, 0, 0, 0);
            max-height: 130px;
            padding-top: 10px;
            padding-bottom: 110px;
            padding-left: 10px;
        }

    }

    .mySel1 {
        background: rgba(0, 0, 0, 0.07);
    }

    .form-group {
        margin-bottom: 10px;
        padding-top: 10px;
        border-bottom: 2px solid #F1F3FA;
    }

</style>

<body>
 <div class="container-fluid" style="padding-left: 0;padding-right: 0">
        <header>
            <nav class="navbar navbar-static-top">
                        <div style="background-color: #4d75a3;">
<!--
                <div class="container-fluid" style="background-color: #162449;    border-radius: 73px;
                    border-top-left-radius: 70px;
                    border-top-right-radius: 70px;
                    border-bottom-right-radius: 70px;
                    border-bottom-left-radius: 70px;">
-->
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle navbar-toggle-sidebar collapsed" id="myMethod">Меню</button>
                        <a class="navbar-brand" href="user.html">
				        <img src="img/IndexLogo.png" style="max-width: 115px;">
				        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <form class="navbar-form navbar-right">
                            <!--
                            <div class="form-group">
                                <input type="text" name="q" class="form-control" placeholder="Search">
                            </div>
                            <button type="submit" class="btn btn-default"><i class="glyphicon glyphicon-search"></i></button>
-->
                        </form>
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!-- /.container-fluid -->
            </nav>
        </header>
    </div>
    <div class="container" style="">


        <main>

            <div class="col-sm-1 col-md-2 col-lg-2">
                <div class="row">
                    <!-- uncomment code for absolute positioning tweek see top comment in css -->
                    <!-- Menu -->
                    <div class="side-menu">
                        <nav class="navbar navbar-default" role="navigation">
                            <!-- Main Menu -->
                            <div class="side-menu-container">
                                <ul class="nav navbar-nav">
                                    <li class="active" onclick="getUser()"><a href="user.html"><span class="glyphicon glyphicon-home"></span> Моя сторінка</a></li>
                                    <li class="active"><a href="#"><span class="glyphicon glyphicon-comment"></span> Новини</a></li>
                                    <li class="active"><a href="dialog.html"><span class="glyphicon glyphicon-envelope"></span> Повідомлення <span class="badge" id="message-incoming" style="margin-left: 5px"></span></a></li>
                                    <li class="active"><a href="edit_my_informations.html"><span class="glyphicon glyphicon-wrench"></span> Налаштування</a></li>
                                    <li class="active"><a href="#"><span class="glyphicon glyphicon-search"></span> Пошук</a></li>
                                    <li class="active" id="log-out"><a href="index.html"><span class="glyphicon glyphicon-log-out"></span> Вихід</a></li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row profile">





                    <!--                   //Parameters of search-->
                    <div class="col-lg-3">
                        <div class="profile-sidebar" style="padding: 0">

                            <div class="sort-information-style" style="margin-bottom: 20px;">
                                <h5>Параметри пошуку</h5>
                            </div>
                            <!--                            <div class="">-->

                            <!--
                                <div class="form-group">
                                    <label for="sel1" class="mySel1">Шукати по:</label>
                                    <select class="form-control" id="sel1">
                                            <option>Ім'я</option>
                                            <option>Прізвище</option>
                                            <option>Ім'я+Прізвище</option>
                                            <option>Email</option>
                                    </select>
                                </div>
-->

                            <div class="form-group">
                                <label for="sel1" class="mySel1">Країна:</label>
                                <select class="form-control sel1" id="country">
                                            <option></option>
                                            <option>Україна</option>
                                            <option>Россия</option>
                                            <option>England</option>
                                            <option>USA</option>
                                            <option>Poland</option>
                                    </select>
                            </div>

                            <label for="sel1" class="mySel1">Дата народження:</label>
                            <div class="form-group">
                                <label for="sel1">Рік:</label>
                                <select class="form-control sel1" id="year">
                                           <option></option>
                                            <option>1970</option>
                                            <option>1971</option>
                                            <option>1972</option>
                                            <option>1973</option>
                                            <option>1974</option>
                                            <option>1975</option>
                                            <option>1976</option>
                                            <option>1977</option>
                                            <option>1978</option>
                                            <option>1979</option>
                                            <option>1980</option>
                                            <option>1980</option>
                                            <option>1981</option>
                                            <option>1982</option>
                                            <option>1983</option>
                                            <option>1984</option>
                                            <option>1985</option>
                                            <option>1986</option>
                                            <option>1987</option>
                                            <option>1988</option>
                                            <option>1989</option>
                                            <option>1990</option>
                                            <option>1991</option>
                                            <option>1992</option>
                                            <option>1993</option>
                                            <option>1994</option>
                                            <option>1995</option>
                                            <option>1996</option>
                                            <option>1997</option>
                                            <option>1998</option>
                                            <option>1999</option>
                                            <option>2000</option>
                                            <option>2001</option>
                                            <option>2002</option>
                                            <option>2003</option>
                                            <option>2004</option>
                                            <option>2005</option>
                                            <option>2006</option>
                                            <option>2007</option>
                                            <option>2008</option>
                                            <option>2009</option>
                                            <option>2010</option>
                                    </select>
                            </div>

                            <div class="form-group">
                                <label for="sel1">Місяць:</label>
                                <select class="form-control sel1" id="month">
                                            <option></option>
                                            <option>01</option>
                                            <option>02</option>
                                            <option>03</option>
                                            <option>04</option>
                                            <option>05</option>
                                            <option>06</option>
                                            <option>07</option>
                                            <option>08</option>
                                            <option>09</option>
                                            <option>10</option>
                                            <option>11</option>
                                            <option>12</option>
                                    </select>
                            </div>

                            <div class="form-group">
                                <label for="sel1">День:</label>
                                <select class="form-control sel1" id="day">
                                            <option></option>
                                            <option>01</option>
                                            <option>02</option>
                                            <option>03</option>
                                            <option>04</option>
                                            <option>05</option>
                                            <option>06</option>
                                            <option>07</option>
                                            <option>08</option>
                                            <option>09</option>
                                            <option>10</option>
                                            <option>11</option>
                                            <option>12</option>
                                            <option>13</option>
                                            <option>14</option>
                                            <option>15</option>
                                            <option>16</option>
                                            <option>17</option>
                                            <option>18</option>
                                            <option>19</option>
                                            <option>20</option>
                                            <option>21</option>
                                            <option>22</option>
                                            <option>23</option>
                                            <option>24</option>
                                            <option>25</option>
                                            <option>26</option>
                                            <option>27</option>
                                            <option>28</option>
                                            <option>29</option>
                                            <option>30</option>
                                            <option>31</option>
                                    </select>
                            </div>
                        </div>

                        <!--                        </div>-->
                    </div>
                    <!--                    //End parameters of search-->





                    <div class="col-lg-7" style="padding-left: 0;">
                        <div class="profile-sidebar" style="padding: 2px;">

                            <div class="form-group">
                                <div class="input-group">



                                    <!--                                   //Field search input-->
                                    <span class="input-group-addon" style="border: 0;background-color: rgba(0,0,0,0)"><i class="fa fa-envelope fa glyphicon glyphicon-search" aria-hidden="true"></i></span>
                                    <div>
                                        <input type="search" class="form-control" id="search-field" name="q" placeholder="Search the site..." aria-label="Search through site content" style="border: 0;background-color: rgba(0,0,0,0);outline: none" placeholder="Пошук...">

                                        <button type="submit" id="search-button" class="form-control">Search</button>
                                    </div>
                                    <!--                                    //End search input-->


                                </div>
                            </div>

                        </div>

                        <!--           //Dialogs list-->
                        <div class="profile-sidebar" style="margin-top: 20px;padding-left: 0;">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 count-dialog-class">
                                <span class="count-field" id="count-dialog-and-message">Результат пошуку: <span id="search-count"></span></span>
                            </div>



                            <ul id="usersList" style="padding-left: 10px;padding-right: 10">

                            </ul>


                            <!--
                            <div class="main-dialog">

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 user-name-div">

                                    <p id="user-name">Вадим Дорошевич <small id="user-line">Online</small> </p>
                                    <p id="last-message-date">21:31 <span> 27/05/2018</span></p>

                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 user-name-div">

                                    <img class="pull-left img-responsive" id="user-photo" src="img/300x300.png">
                                    <div class="div-text">
                                        <p class="text-center" id="last-message">Львів</p>
                                    </div>

                                </div>
                            </div>

                            <div class="main-dialog">

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 user-name-div">

                                    <p id="user-name">Андрій Макогон <small id="user-line">Online</small> </p>
                                    <p id="last-message-date">21:31 <span> 27/05/2018</span></p>

                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 user-name-div">

                                    <img class="pull-left img-responsive" id="user-photo" src="img/300x300.png">
                                    <div class="div-text">
                                        <p class="text-center" id="last-message">Херсон</p>
                                    </div>

                                </div>
                            </div>
-->




                            <!--
                            <div id="users">
                                <h2>All Users</h2>
                                <button id="updateUserList">UPDATE</button>
                                <ul id="usersList">
                                </ul>
                            </div>
-->

                        </div>
                        <!--          //End dialog list-->

                    </div>

                </div>
            </div>

        </main>

        <footer class="pull-left footer" style="text-align: center">
            <p class="col-md-12">
                <hr class="divider"> Copyright &COPY; 2018 <a href="#">HiPasserby</a>
        </footer>

    </div>

    <script>
        $.ajax({
            "url": "http://localhost:8080/login",
            'method': 'GET',
            'contentType': 'application/json',
            'dataType': 'json',
            'headers': {
                'A-Token': localStorage.getItem('A-Token'),
                'Content-Type': 'application/json;charset=utf-8'
            },
            'success': function(data) {
                $("#photo-field").attr("src", 'http://localhost:8080' + data.photo);
                $('#title').append("Пошук користувачів в hipasserby");
                $('#firstName').val(data.firstName);
                $('#lastName').val(data.lastName);
                $('#city').val(data.city);
                $('#date-of-birth').val(data.dateOfBirth);
                $('#marital-status').val(data.maritalStatus);
                $('#language').val(data.language);
                $('#credo').val(data.credo);
                $('#marital-status').val(data.maritalStatus);
                $('#school').val(data.school);
                $('#university').val(data.university);
                $('#email').val(data.email);
                $('#phone-number').val(data.phoneNumber);
            },
            'error': function(error) {
                console.log(error);
                document.location.href = 'index.html';
            }
        });


        $('#search-button').click(function() {

            var firstName = $('#search-field').val();
            var lastName = $('#search-field').val();
            //            var email = $('#search-field').val();
            var country;
            if ($('#country').val().length > 0) {
                country = $('#country').val();
            }
            var yearOfBirth;
            if ($('#year').val() > 0) {
                yearOfBirth = $('#year').val();
            }
            var monthOfBirth;
            if ($('#month').val() > 0) {
                monthOfBirth = $('#month').val();
            }
            var dayOfBirth;
            if ($('#day').val() > 0) {
                dayOfBirth = $('#day').val();
            }

            var searchingRequest = {
                'firstName': firstName,
                'lastName': lastName,
                'country': country,
                'yearOfBirth': yearOfBirth,
                'monthOfBirth': monthOfBirth,
                'dayOfBirth': dayOfBirth
            };

            $.ajax({
                "url": 'http://localhost:8080/user/search',
                "type": "POST",
                "contentType": "application/json",
                "dataType": "json",
                "data": JSON.stringify(searchingRequest),
                'headers': {
                    'A-Token': localStorage.getItem('A-Token'),
                    'Content-Type': 'application/json;charset=utf-8'
                },
                "success": function(data) {
                    $('#search-count').empty();
                    $('#search-count').append('(' + data.length + ')');
                    $('#usersList').empty();
                    for (var i = 0; i < data.length; i++) {

                        console.log(data[i].firstName);

                        $('#usersList').append(


                            "<div class='main-dialog' onclick='goUser(" + data[i].id + ")'>" +

                            "<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 user-name-div'>" +

                            "<p id='user-name' class='link-user'>" + data[i].firstName + " " + data[i].lastName + "<small id=\"user-line\"></small> </p>" +
                            "<p id=\"last-message-date\">" + data[i].dateOfRegistration + "</p>" +

                            "</div>" +

                            "<div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 user-name-div\">" +

                            "<img class=\"pull-left img-circle img-responsive\" id=\"user-photo\" src='" + "http://localhost:8080" + data[i].photo + "'>" +
                            "<div class=\"div-text\">" +
                            "<p class=\"text-center\" id=\"last-message\">" + data[i].country + "</p>" +
                            "</div>" +

                            "</div>" +
                            "</div>"

                        );


                    }
                },
                "error": function(error) {
                    console.log("" + error);
                }

            });



        });




        function getUser() {

            $.ajax({
                "url": "http://localhost:8080/login",
                'method': 'GET',
                'contentType': 'application/json',
                'dataType': 'json',
                'headers': {
                    'A-Token': localStorage.getItem('A-Token'),
                    'Content-Type': 'application/json;charset=utf-8'
                },
                'success': function(data) {
                    document.location = "user.html?id=" + data.id;
                },
                'error': function(error) {
                    console.log(error);
                    document.location.href = 'index.html';
                }
            });

        }

        function goUser(Object) {
            var id = Object;

            document.location = "user.html?id=" + id;
        }
        
        $(function() {

            $.ajax({
                "url": "http://localhost:8080/dialog/notification",
                'method': 'GET',
                'contentType': 'application/json',
                'dataType': 'json',
                'headers': {
                    'A-Token': localStorage.getItem('A-Token'),
                    'Content-Type': 'application/json;charset=utf-8'
                },
                'success': function(data) {
                    //                    var count = $('#message-incoming').val();
                    if (data > 0) {
                        $('#message-incoming').append(data);
                        $('#title').prepend("(" + data + ")");
                    }
                },
                'error': function(error) {
                    console.log(error);
                }
            });
        });

        $(window).resize(function() {
            var width = $(window).width();
            if (width < 1200) {
                $("#myMethod").collapse('hide');
            }
        });


        $(function() {
            $('.navbar-toggle-sidebar').click(function() {
                $('.navbar-nav').toggleClass('slide-in');
                $('.side-body').toggleClass('body-slide-in');
                $('#search').removeClass('in').addClass('collapse').slideUp(200);
            });




            $('#search-trigger').click(function() {
                $('.navbar-nav').removeClass('slide-in');
                $('.side-body').removeClass('body-slide-in');
                $('.search-input').focus();
            });
        });


        //Вихід з аккаунту
        $('#log-out').click(function() {
            localStorage.removeItem('A-Token');
        });

    </script>

    <!--    <script type="text/javascript" src="assets/js/bootstrap.js"></script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

</body>

</html>
